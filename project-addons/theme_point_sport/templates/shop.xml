<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <!-- Shop/category page template -->
    <template id="website_sale_products" name="Products Point Content Template" inherit_id="website_sale.products">
        <!-- User access control -->
        <xpath expr="//div[@id='wrap']" position="before">
            <t t-set="user_access" t-value="website.user_access()"/>
        </xpath>
        <xpath expr="//div[hasclass('oe_website_sale')]" position="attributes">
            <attribute name="t-if">user_access == True</attribute>
        </xpath>
        <xpath expr="//div[hasclass('oe_website_sale')]" position="after">
            <t t-if="user_access == False" t-call="theme_anzamar.only_logged_in_users_advise"/>
        </xpath>
    </template>

    <!-- Brand page template -->
    <template id="website_sale_product_brand_product_brands" name="Brands Point Content Template" inherit_id="website_sale_product_brand.product_brands">
        <!-- User access control -->
        <xpath expr="//div[hasclass('container')]" position="before">
            <t t-set="user_access" t-value="website.user_access()"/>
        </xpath>
        <xpath expr="//div[hasclass('container')]" position="attributes">
            <attribute name="t-if">user_access == True</attribute>
        </xpath>
        <xpath expr="//div[hasclass('container')]" position="after">
            <t t-if="user_access == False" t-call="theme_anzamar.only_logged_in_users_advise"/>
        </xpath>
    </template>

    <!-- Shop categories template -->
    <template id="website_sale_products_categories" name="eCommerce categories Point Sport" inherit_id="website_multi_theme.auto_view_poi_website_sale_products_categories">
        <xpath expr="//div[@id='products_grid_before']/ul" position="replace">
            <ul class="nav nav-pills nav-stacked mt16" id="o_shop_collapse_category">
                <li t-att-class=" '' if category else 'active' ">
                    <a t-att-href="keep('/shop',category=0)" class="o_not_editable">All Products</a>
                </li>
                <t t-foreach="categories" t-as="categ">
                    <t t-call="website_sale.option_collapse_categories_recursive" />
                </t>
            </ul>
        </xpath>
    </template>
    <template id="website_sale_option_collapse_categories_recursive" name="Recursive categories Point Sport" inherit_id="website_sale.option_collapse_categories_recursive">
        <xpath expr="//a" position="attributes">
            <attribute name="t-att-href">'/category/%s' % categ.slug if categ.slug else keep('/shop/category/' + slug(categ), category=0)</attribute>
        </xpath>
    </template>

</odoo>